# 学習管理アプリケーション 要件定義書

**データモデル詳細**: [data-model.md](./data-model.md) を参照

---

## 1. 共通レイアウト（Layout）

|**項目**|**種別**|**内容・機能**|
|---|---|---|
|**サイドバー**|ナビゲーション|「ホーム」「カレンダー」「設定」のリンクを表示。|
|**ヘッダー：ストリーク**|表示|現在の連続達成日数（例：`🔥 12 days`）を表示。Bronze以上を連続で達成した日数をカウント。記録をしなかった日があった場合はリセットされる。|
|**ヘッダー：記録ボタン**|ボタン|**最重要アクション。** 押下で「記録画面」へ遷移。|

---

## 2. ホーム画面（Dashboard）

「過去の学習履歴」を一覧し、モチベーションを維持する画面です。

### A. デイリーレポートカード一覧（メインエリア）

過去7日分のデイリーレポートをカード形式で表示します。新しい順（今日が最上位）に並びます。

#### カードの構成要素

各カードには以下の情報を表示：

- **日付**: 「2025年12月31日（火）」形式で表示

- **達成度バッジ**: Bronze / Silver / Gold / 未記録 のいずれかを色付きバッジで表示

- **学習内容サマリー**:

    - ユーザーが入力した学習内容を箇条書き形式（最大3件）で表示

    - 入力がない場合は「学習内容の記録なし」と表示

- **日報の抜粋**:

    - 自由記述（Journal）がある場合、冒頭100文字程度を表示

    - ない場合は「日報なし」と表示

- **カードクリック**: カード全体がクリッカブル。押下でその日の「日詳細画面（読み取り専用）」へ遷移


#### 表示件数と読み込み

- 初期表示: 直近7日分のカードを表示

- 今日の記録がまだない場合も「未記録」カードとして表示


### B. サマリーエリア（サイドエリア）

- **過去7日間の達成度ビジュアライザー**:

    - **ドットマップ**: 直近7日間の達成状況を小さな色付きドット（銅・銀・金・灰）で横並び表示

    - 日付ラベル付き（25, 26, 27...）

- **提案バナー（条件合致時のみ出現）**:

    - **メッセージ**: 「レベルアップの条件を満たしました」or「目標をレベルダウンしませんか？」等のテキスト

    - **アクションボタン**: 押下で「目標編集画面」へ遷移

    - **表示条件と編集権限**:
        - **レベルアップ提案**:
            - **Gold を14日連続達成**: Gold目標のみ編集可能
            - **Silver を14日連続達成**: Silver目標のみ編集可能
            - **Bronze を14日連続達成**: Bronze目標のみ編集可能
        - **レベルダウン提案**: 1週間のうち、Bronzeすら4日以上達成できなかった場合（全目標の編集が可能）
        

---
## 3. 記録・日報画面（Achievement & Strategy）

この画面のコンセプトは、**「昨日の仮説を検証し、明日の自分を楽にするための作戦会議」**です。

### 1. 【CHECK】前日からの「工夫」の答え合わせ
**表示ロジック:** 現在のステータスが「継続中」である全ての工夫をリストアップします。**当日の達成度（Bronze/Silver/Gold）が何であったかは問いません。**

- **工夫リスト（複数表示）**:
    
    - **工夫の内容**: （例：ジャージで寝る）
    
	- **目標レベルラベル**:**[Bronze]** / **[Silver]** / **[Gold]** を工夫内容の横にバッジ表示。
        
    - **実行フラグ**: [ 実行できた ] / [ できなかった ] / [再開初日]
        
    - **実感効果**: [ 最高 ] / [ 微妙 ] / [ 逆効果 ] / [ 未評価 ]
**（※1）ロジック補足:** > 管理画面から再開した工夫は、この日の夜は「再開初日」として扱う。

- CHECKリストには**必ず表示**する。
    
- 「実行フラグ」の初期値は `[再開初日]` とするが、ユーザーは  
    `[実行できた] / [できなかった] / [再開初日]` のいずれかを必ず選択する。
    
- 「実感効果」は通常通り `[最高] / [微妙] / [逆効果] / [未評価]` から選択する。  
    つまり、**再開初日であっても評価の入力自体をスキップすることはない**。
---

### 2. 【DO】今日の成果記録

その日の実際の成果を記録します。

#### A. 学習内容サマリー（必須）

- **入力形式**: 箇条書き形式で複数項目を入力（テキストエリア）
- **プレースホルダー**: 「なし」（灰色で表示）
- **入力例**:
    - Reactのコンポーネント設計を学習
    - TypeScriptの型定義を復習
    - データベーススキーマの設計
- **補足**: 何も作業していない場合は「なし」と入力

#### B. 目標達成度（3-Step Cards）

その日の実際の達成度を選択します。

| **Bronze** | **Silver** | **Gold**   |
| ---------- | ---------- | ---------- |
| **「最低限」**  | **「計画通り」** | **「期待以上」** |
| 30分だけ座る    | 1機能完成      | リファクタまで完了  |
| [ 選択する ]   | [ 選択する ]   | [ 選択する ]   |
**表示制御**: **BronzeまたはSilverを選択した場合のみ、後述の「Step-Up Strategy」が出現します。**

---

### 3. 【ACT / PLAN】明日のための戦略

今日の振り返りから、明日の行動を最適化します。

#### ① 工夫のステータス更新（Act）

上記「1」で評価した各工夫について、明日どうするかを選択します。

- **選択肢:** [ そのまま継続 ] / [ 改良して継続 ] / [ 今日で終了 ]
    
- **理由（終了する場合） / 改良案（改良する場合）（任意）:** テキストボックス（例：睡眠の質が下がったので、別の服にする）
    

#### ② 明日を「楽」にする新しい工夫（Plan）（任意）
今日達成した目標の持つプロパティとして保存される

新しく試したい工夫がある場合に入力します。

- **内容:** 「明日、作業を始める時の最初の1歩をさらに小さくするには？」
    
- **例:** 昼休みにTODOリストだけ作っておく。
    

#### ③ 次のレベルへの架け橋（Step-Up Strategy）（任意）
- **表示条件**: **今日の達成度がGold以外の場合のみ表示。**
- **内容:** 「もし今日、一段上の目標を達成するとしたら、何が足りなかった？」
    
- **例:** 午後の睡魔対策が必要。15分の昼寝を導入する。

例えば、今日がブロンズだった場合、ここに記入した内容は  
「Silverレベルを達成するための**新しい工夫候補**」として保存する。  
保存時点で、
- 紐づきレベル: Silver
- ステータス: 「継続予定（明日から適用）」
    として、Silver目標配下の工夫として新規登録される。

**ステータス自動更新**: 「継続予定（明日から適用）」ステータスの工夫は、翌日の夜の記録・日報画面で自動的に「継続中」ステータスに変更され、CHECKリストに表示される。


#### ④ 自由記述（Journal）

- **内容:** 今日感じたこと、自分への褒め言葉など。
    

---

### 4. アクションボタン

- **[ 記録を確定してロックする ]**
    
    - ※保存後、今日の記録は読み取り専用になり、ダッシュボードへ遷移します。
        

---


## 4. 目標編集画面（Goal Adjustment）

提案バナー経由、「目標そのもの」を書き換える画面です。

- **編集入力フォーム**:
    
    - **Bronze目標入力**: テキストボックス。
        
    - **Silver目標入力**: テキストボックス。
        
    - **Gold目標入力**: テキストボックス。
        
- **更新ボタン**: 入力した内容を新しい基準として保存。
    

---

## 5. カレンダー画面（Monthly Overview）

過去の頑張りを振り返るための画面です。

- **月次カレンダー**:
    
    - **日付セル**: 達成度に応じたカラー（銅・銀・金）で塗りつぶし、またはドットを表示。
        
    - **ホバーツールチップ**: 日付にマウスを乗せると「その日の目標」と「日報の冒頭」をポップアップ表示。
        
- **詳細リンク**: 日付クリックで、その日の「日詳細画面（読み取り専用）」へ。

### 日詳細画面（読み取り専用）

カレンダーから遷移する、過去の記録を閲覧する画面です。

- **表示内容**: その日の記録・日報画面で入力した全ての内容を表示
    - 達成度（Bronze/Silver/Gold）
    - 工夫の評価（実行フラグ、実感効果）
    - 工夫のステータス更新内容（そのまま継続/改良して継続/今日で終了、理由・改良案）
    - 新しい工夫の内容
    - Step-Up Strategyの内容（該当する場合）
    - 自由記述（Journal）

- **編集不可**: 確定後の記録は編集できず、読み取り専用として表示される。
    

---

## 6. 設定画面（Settings）

- **GitHub設定**: リポジトリURLの入力。
    
- **認証設定**: GitHub Personal Access Token (PAT) の登録・更新。
    
- **ルール確認**: 固定の判定ルール（レベルアップ/ダウン条件）をテキストで表示。
    

---

### UX向上のための「カラーパレット」提案

PC画面で長時間見ても疲れず、かつ「達成感」を感じられる配色です。

|**状態**|**推奨カラー**|**イメージ**|
|---|---|---|
|**未達**|`#E5E7EB` (Gray 200)|背景に溶け込む控えめな色。|
|**Bronze**|`#CD7F32` (Bronze)|落ち着いた銅色。温かみのあるブラウン。|
|**Silver**|`#94A3B8` (Slate 400)|洗練された銀色。少し青みのあるグレー。|
|**Gold**|`#F59E0B` (Amber 500)|鮮やかな金色。最も目立つ、達成の象徴。|

---
## 7. 工夫管理画面（Effort Management）改定案

この画面（＝フロー内で言う「工夫編集画面（新規）」）の役割は、

- 現在進行中の工夫の**文言のみ微修正**すること
    
- 過去に停止した工夫を**明日から再開するよう予約**すること  
    に特化させる。  
    ここでは「継続中 → 停止」などのステータス変更は行えない。

### A. 現在進行中の工夫一覧（Active Tactics）

今、自分が何を意識して動いているかを確認するエリアです。

| **項目**       | **種別**                      | **内容・機能**                                                                                                                   |
| ------------ | --------------------------- | --------------------------------------------------------------------------------------------------------------------------- |
| **工夫カードリスト** | 表示                          | 現在「継続中」ステータスの工夫を表示。(改良して継続と継続はどちらもステータス「継続中」扱い)                                                                             |
| **ステータス表示**  | ラベル                         | 「継続中」等の現在の状態を表示。                                                                                                            |
| **編集ボタン**    | ボタン                         | 工夫の**「文章（文言）」のみ**を微調整する（誤字脱字の修正など）。                                                                                         |
| **誘導メッセージ**  | テキスト                        | 「継続中の工夫を**やめる／継続可否を変更する**場合は、夜の『記録・日報画面』で振り返りと共に行ってください。  <br>この画面では、<br><br>- 文言の微修正<br>    <br>- 停止済み工夫の『明日から再開』のみが行えます。」 |
| 紐づけラベル       | [Bronze]<br>[Silver] [Gold] | 工夫は「どの目標レベルを達成するための工夫か」を示すラベルを**いずれか1つだけ**持つ。  <br>1つの目標レベルは複数の工夫を持てるが、1つの工夫が複数レベルに属することはない。  <br>**※複数レベルに有効な工夫でも、最も低いレベル（優先順位が高いレベル）に紐づけて記録される。**                                |

- **ポイント:** ここには「停止」や「削除」ボタンをあえて配置しません。
    

### B. 工夫のアーカイブ・復元（Tactical Archive）

過去に試して「やめた」工夫を管理する、藤田さんの「戦術資産」エリアです。

| **項目**         | **種別** | **内容・機能**                                                                                                      |
| -------------- | ------ | -------------------------------------------------------------------------------------------------------------- |
| **アーカイブリスト**   | 表示     | 過去に「今日で終了」とした工夫を一覧表示。                                                                                          |
| **過去の戦績**      | 表示     | その工夫を停止した際の「理由（Actで記入したもの）」と、停止直前の「実感効果（最高/微妙/逆効果）」を表示。                                                        |
| **[ 明日から再開 ]** | ボタン    | 押下すると、その工夫のステータスが「再開（予約）」に変わり、  <br>次の「記録・日報画面」から CHECK リストに「再開初日」として表示される。  <br>当日中に「継続中→停止」に変更することはここではできない。 |

---

## 運用ロジックの整理

画面要件を裏支えするロジックを以下のように定義します。
        
1. **日中の「継続中」工夫のロック:**
    
    - 日中に「やっぱりこれやめたい」と思っても、この画面では操作できません。
        
    - これにより、「今日、ジャージで寝るって決めたのに、昼間に面倒になって設定をオフにする」という**自分への甘えをシステムが構造的に防止**します。

---
## 8. ユーザーフロー

### 1. 毎日のサイクル（戦術のフィードバック・ループ）

ユーザーが毎日通る「24時間の流れ」はこうなります。

- **【Day 1：夜】記録・日報画面**
    
    - 目標達成度を選択。
        
    - **「明日のための工夫（仮説）」**を入力。（例：ジャージで寝る）
        
- **【Day 2：夜】記録・日報画面（ここがポイント！）**
 ステータス「継続中」「再開（予約）」の工夫を複数呼び出し、  
記録・日報画面内の CHECK / ACT セクションで  
`[そのまま継続] / [改良して継続] / [今日で終了]` を選択してステータスを更新する。「工夫管理・編集画面」ではステータスの変更は行わず、  
停止済み工夫の「明日から再開」予約と文言の微修正のみを行う。
- **① 前日の工夫の答え合わせ（Check）：** 「昨日の工夫（ジャージで寝る）はどうだった？」
        
	- 実行できたか？ [Yes / No]
		
	- 効果は？ [最高 / 微妙 / 逆効果]
            
- **② 次の工夫の決定（Act）：** 「明日もこれを続ける？」
        
	- [続ける] / [改良して続ける] / [やめる]
        
	- 理由は？ [自由記入欄] (例：睡眠の質が下がっているのでやめる)
            
- **③ 目標達成度の報告：** （通常通り、Bronze/Silver/Goldを選択）

#### 【イレギュラー：日中に戦術を立て直す場合】

1. **日中：工夫管理画面**
    
    - 過去のアーカイブから「これなら今の自分でもできそう」な工夫を選び、**[ 再開 ]** を押す。
        
2. **その夜：記録画面**
    
    - CHECKリストに再開した工夫が出現。
        
    - ユーザーは「再開初日」としてそれを確認し、記録を完了する。
        
3. **翌日：実践**
    
    - 再開した工夫を意識して1日を過ごす。
        
4. **翌々日の夜：記録画面**
    
    - はじめて「実行できたか？」「実感効果は？」の本当の答え合わせ（CHECK）を行う。